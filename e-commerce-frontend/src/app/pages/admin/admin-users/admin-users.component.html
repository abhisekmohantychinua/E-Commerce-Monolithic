<mat-form-field class="m-2" color="primary">
  <mat-label>User id</mat-label>
  <input [(ngModel)]="userId" matInput name="userId">
  <mat-icon (click)="clearId()" color="warn" matSuffix>close</mat-icon>
  <mat-icon (click)="searchUser()" color="primary" matSuffix>search</mat-icon>
</mat-form-field>

@for (user of users; track user.id) {
  <mat-card class="mb-2">
    <mat-card-header>
      <img mat-card-avatar src="/assets/default-profile.png" alt="">
      <mat-card-title>{{ user.name }}</mat-card-title>
      <mat-card-subtitle>{{ user.id }}</mat-card-subtitle>
      <mat-card-actions align="end">
        <button mat-icon-button color="primary">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="deleteUser(user.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </mat-card-actions>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
      <mat-list>
        <mat-list-item>
          <mat-icon matListItemAvatar>alternate_email</mat-icon>
          <p matListItemTitle>
            {{ user.username }}
          </p>
        </mat-list-item>
        <mat-list-item>
          <mat-icon matListItemAvatar>password</mat-icon>
          <p matListItemTitle>
            {{ user.password }}
          </p>
        </mat-list-item>
        <mat-list-item>
          <mat-icon matListItemAvatar>person</mat-icon>
          <p matListItemTitle>
            {{ user.role }}
          </p>
        </mat-list-item>
        <mat-list-item>
          <mat-icon matListItemAvatar>mail</mat-icon>
          <p matListItemTitle>
            {{ user.email }}
          </p>
        </mat-list-item>
        <mat-list-item>
          <mat-icon matListItemAvatar>call</mat-icon>
          <p matListItemTitle>
            {{ user.phone }}
          </p>
        </mat-list-item>
      </mat-list>
    </mat-card-content>
    <mat-divider></mat-divider>
    <mat-card-footer class="flex flex-wrap gap-1 p-2">
      @if (user.addresses.length > 0) {
        @for (address of user.addresses; track $index) {
          <app-address-card [address]="address" (deleteAddressEmitter)="deleteUserAddress($event)"/>
        }
      }
    </mat-card-footer>
  </mat-card>
}
